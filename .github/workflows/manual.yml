name: achieve-ui-cicd 

on:
  push:
    branches: [development, dev, check_branch, test/ci_cd] 
  pull_request:
    branches: [development, dev, check_branch, test/ci_cd] 

jobs: 
  build:
    name: Build Angular Project
    runs-on: self-hosted


    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      
      - name: Install dependencies
        run: node -v
         
         

      - name: Install Angular CLI
        run: |
           npm install -g @angular/cli 
           npm i -f
           dir
         
         
       
      - name: Building project
        run: |
            dir
            ng build

      - name: copying from dist to IIS folder
        run: |      
            dir
            Get-ChildItem -Path "D:\Achieve-ui-cicd" | Remove-Item -Recurse -Force
            Copy-Item -Path "dist/achieve-ui/browser/*" -Destination "D:\Achieve-ui-cicd" -Recurse -Force
            Copy-Item -Path "dist/achieve-ui/3rdpartylicenses.txt" -Destination "D:\Achieve-ui-cicd" -Force






        
